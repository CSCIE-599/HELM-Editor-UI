<svg class="draggable-container"
  xmlns="http://www.w3.org/2000/svg">

  <!-- Zoom buttons -->
  <circle class="zoombtn"  cx="40" cy="31" r="8" ng-click="zoomCanvas(0.8, $event)"/>
  <circle class="zoombtn"  cx="40" cy="49" r="8" ng-click="zoomCanvas(1.25, $event)"/>
  <text class="plus-minus" x="36" y="28"> _  </text> 
  <text class="plus-minus" x="36" y="53"> +  </text>  


  <g id="map-matrix" transform="matrix(1 0 0 1 0 0)">

    <!-- loop thru all the connections in the graph -->
    <!-- connections are drawn first so the lines are not visible inside the nodes -->
    <g ng-repeat="connection in graph.connections">
      <path 
        ng-attr-d="M{{connection.sourceCoordX()}}, {{connection.sourceCoordY()}} L{{connection.destCoordX()}}, {{connection.destCoordY()}}"
        ng-attr-class="{{'path-style'}}">
      </path>
    </g>

  <!-- loop thru all the nodes in the graph -->
    <g ng-repeat="node in graph.nodes">
      <rect ng-attr-class={{'node-rect'}}    
            ng-attr-width="{{node.width()}}"
            ng-attr-height="{{node.height()}}"
            ng-attr-fill="{{node.colour()}}"
            ng-attr-x="{{node.x()}}"
            ng-attr-y="{{node.y()}}"
            ng-attr-rx="{{node.rx()}}"
            ng-attr-ry="{{node.ry()}}"
            ng-attr-transform="rotate({{node.transformDegree()}}, {{node.transformx()}}, {{node.transformy()}})">
      </rect>

      <text
        ng-attr-x="{{(node.width()/2)+node.x()}}"
        ng-attr-y="{{(node.height()/2)+node.y()}}"
        text-anchor="middle"
        alignment-baseline="middle">
        {{node.name()}}
      </text>

      <text
        ng-attr-x="{{(node.x()-5)}}"
        ng-attr-y="{{(node.y()-5)}}"
        text-anchor="middle"
        alignment-baseline="middle"
        ng-attr-visibility="{{node.seqVisible()}}">
        {{node.num()}}
      </text>
    </g>
  </g>
</svg>
