language: node_js
node_js:
  - "4.3.2"
cache:
  directories:
    - node_modules
    - bower_components

env:
  global:
    - secure: "e4uzdtTbQG+FqzEoOqLU610B0jIBf8y+v8vZjkNqaFgsx0WNeDdugWmCDk8CmZi5U0Oq3spFjd53W1lIbp1+lwZ/EDLbeOY4ychaFbkS1ejhtBEeQxyQueP4hRLTI3TRsvwnrXaxpAxf1+xIK1Cq3DKntBZCN+q2J/+6wdSOXOeI1Vq1gBv/yi/+G2osunpboqNWcgpv58104j9bMcCRSfvub8QpRqrM9WtA62YusE3DU8BR7wOFfLfQ8GlqTTCXMsynV7TM48va+w6pyJRfjA5lbF56dlSEb6YekXPIx5lrZfh/08/l+xC2+EO+gsd6+hEQZgL2OMIlPZIGGVIWb0DWpPnfEi1QR+IdRDMcqKHjcBvZ4h2cUotd89I0BZQhulTbeYy/MyX2M/LAv+iRIMmdznL1pVN6/AMTlCwHVxLArsNneFrMYaro/TWtkDyUN3g/tQWQdSISv9+bjXyF/Ic7EJKgjlau4+6OeFBwOHs2Ng3bos8UE6S7DaSEM4lVDOLDqii5XNqrEEZA1kqbweqa1oBEJOBDb47gIQGIDE+kOOwnmjhK0pUD5owTN1BjGMdwT6KHamEgTx0JOxniiNZp0uAQ3qzdmTL67aef0FEe54rzysw5mHDN1ObRry0groNFnImp2x/DkbbE87uMSa4P6ddyFnBwD+VAguHmE0k="
    - secure: "ZxmvfpZdM4kQH1MGKJq+NYJMq62RDebYudVrRZ1IunLQrrZNnRcK1sl1erSjt6uA7iDKylmIQw7xigqvYpK7BbZjCyoz9+1AnkCan2Liddzvt+k7khAU48Rg1Hv+/FPnNuc4YhcKRkynBk+sk2BZ5P/uGWzpbK8ahjs/hcmF7MMXEPzw64OdMGUyEkl8QDxcuTtUWq8G1qSb0TKRPuouAui7lF3BBEGMjQ1qwiEczJaGn70dml2edTvfV6a02EKDB9UPeVRTUgQttkk3syHmB3HOx2oZ+Ni8HdQQU2eC2OO2vgOS8vWG9I12sUv4cZp405DEnxnCdKYDfDCidHaywXFJoEDWfFq8MgMs1Yolb7h9EFapnEJ8IaEcev1d/C+w4imgik9TEVUaPsQBkheCniKXp3Eo1n//7qOniOtnxfNfd/ZOEr2WZiKLHZKBZOJP7GEXnoQ0lkIuWD1JIzJtOqiHx69U60FLDLorBNx6wGbV1KbUKcyAsGGfhuEKi9LdcVaK34TAtHxs0cURsWsvdwg2oFrrVW3F1DyPSVT6Qd8SXDNCgFqvaf4GYE8VxORTxuz9+63m+WIxhylemcxEoLBTKTIlN5mYjrL20C4hUSQWFsdGTIQOWBRvrhVkQrlAmLbJUZjb+kyBzR8bBQFOeVNd6wBcXshbSUw/nBuImnA="
    - secure: "LowxOW1XIA0v+JMulQ+vP1fkBMrr/BcPs7uWlSP6hD10KfhsZ1NwUd51YVv+g5oEdjIacScznnxX5XTQALP9sBVUA837bkh3QSZ+ZPvUwg2chx2BGjRjGwEvnGR01uS0Bq5zG1rYhRB/cCcODE60Shpetr/xy7r15uTVXupci3b/xiNPxDE/7gY8GAbJhFehCHR5yH9J5/ulRN5/YrDyRdmR9aIgkPUPaRAUn8HyTlXbXTr33Dazc/qVPJx1l7o9DRfd69yFkcX76MiaGpIV0+a6c/wHGkr/ke8A+og8teXh4dFMi1I8d/Z+JuXpDhUoUbqejdHhZfYMd7JE9m3TRnv3DtfV5iKh6RVDDwBGhEQexdB0YFLYmkWUmMd8HImmMip+xaHpGq2Ensrms752hFM8qeZCStL3TLbeTYBwIFuuU52jrFH6B1KdgTfPA4pxkGdiMdIIKw6OZ3ABsaStMZbvNEh97zmFNunsDfompjTUgFcVWJSvpyfz09fg4ek826O+NjwQP4aRIhhZkeGYcp1/MyfKnHcxh3eHpDgo9gwnSbGUa23UC7jakaUB+Wackc9bAHDJfg7Xj3MtOVCUqBsfpgMwJM500hFiBPjzpwa+e3NSmso3ak6cyKKOlHBfM7/Ump2s48rp8AnvZbTOnW/1qDzwwL6eeGptiT1PvXY="
    - secure: "RTOIdLFGMS1Di3jGZSZr4bGg4oBKmv04PxoP5PGi3mh+ReGIPNpT1WBsAq/Omjho6fHqDcOJ8pGIr52W8yCvCNwZFYBYFgkjYcQUcXokEMQCO4H4XlQqkFt9is+ENSsY1y3CMQ0eFI2p7nmiJT3mJKA93TI9Jb28tXM0LfJ/44eSZu88Y1x/UBr2iTF6drN74BMQ0j29dhw9q3omxfL73PurDgfEUUBbu9xh7nB0Tx5pcYjI4Y9poPcqWep7rLdEigr8VjunP/X9uAfFrhkzPsLG8j0sg27JIs9p3mP7rKkZXcWSXcvaIaMjOfbB4q8g7v4VqL2/NoR6HiTwYSCxj5RpKRSmxY2qw4Wg20+r2egMVtgwDvV9xBFXAP8e3k/nYUtW6BdvWnFMxTwks/ZrwlbC120EPicbCL5LKz2ReaxARQA7enUt1sDkGbwhIF94uCQxbg73JoNsaWAJYEzPdkAkboIfwRBIEVbOT3FhsvkSrcq73BVI9XBWvXYBnXjbCzbFO6NFa57sbLxS/3IbadkqTEI/hEgNdY9LPzuPiOp16QVJ0KsqCydQqQXV0Or4AFGn11Hev0RjjhtB1mUCxmMRsolEtVF8WywYSMQQAV/1O4SiHe9mXwn+4TEpbuVnJl1jFEYKz7gC41qSxBMs7O0cr05XyxmoSkuLAFU8Xnw="

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3 # give xvfb some time to start
  - npm install -g grunt-cli
  - npm install -g bower
  - npm install
  - bower install
  - nohup bash -c "./nodemodules/protractor/bin/webdriver-manager start --standalone 2>&1 &"
  - sleep 5

script:
  - echo "running tests"
  - grunt test
  - grunt protractor-firefox

after_success:
  - grunt build